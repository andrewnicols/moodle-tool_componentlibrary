{"version":3,"sources":["../src/clipboardwrapper.js"],"names":["define","$","Tooltip","ClipboardJS","init","document","querySelectorAll","forEach","element","insertAdjacentHTML","btn","tooltipBtn","addEventListener","hide","clipboard","target","trigger","parentNode","nextElementSibling","on","e","setAttribute","show","setTimeout","dispose","clearSelection"],"mappings":"AAuBAA,OAAM,0CAAC,CAAC,QAAD,CAAW,qBAAX,CAAkC,uCAAlC,CAAD,CAEN,SAASC,CAAT,CAAYC,CAAZ,CAAqBC,CAArB,CAAkC,CA2C9B,MAAO,CACHC,IAAI,CA1CG,QAAPA,CAAAA,IAAO,EAAW,CAIlBC,QAAQ,CAACC,gBAAT,CAA0B,iCAA1B,EACKC,OADL,CACa,SAAUC,CAAV,CAAmB,CACxBA,CAAO,CAACC,kBAAR,CAA2B,aAA3B,+HACH,CAHL,EAKAJ,QAAQ,CAACC,gBAAT,CAA0B,gBAA1B,EACKC,OADL,CACa,SAASG,CAAT,CAAc,CACnB,GAAIC,CAAAA,CAAU,CAAG,GAAIT,CAAAA,CAAJ,CAAYQ,CAAZ,CAAjB,CAEAA,CAAG,CAACE,gBAAJ,CAAqB,YAArB,CAAmC,UAAY,CAI3CD,CAAU,CAACE,IAAX,EACH,CALD,CAMH,CAVL,EAYA,GAAIC,CAAAA,CAAS,CAAG,GAAIX,CAAAA,CAAJ,CAAgB,gBAAhB,CAAkC,CAC9CY,MAAM,CAAE,gBAAUC,CAAV,CAAmB,CACvB,MAAOA,CAAAA,CAAO,CAACC,UAAR,CAAmBC,kBAC7B,CAH6C,CAAlC,CAAhB,CAMAJ,CAAS,CAACK,EAAV,CAAa,SAAb,CAAwB,SAASC,CAAT,CAAY,CAChC,GAAIT,CAAAA,CAAU,CAAG,GAAIT,CAAAA,CAAJ,CAAYkB,CAAC,CAACJ,OAAd,CAAjB,CACAI,CAAC,CAACJ,OAAF,CAAUK,YAAV,CAAuB,qBAAvB,CAA8C,SAA9C,EACAV,CAAU,CAACW,IAAX,GACAC,UAAU,CAAC,UAAW,CAClBZ,CAAU,CAACa,OAAX,EACH,CAFS,CAEP,GAFO,CAAV,CAIAJ,CAAC,CAACJ,OAAF,CAAUK,YAAV,CAAuB,qBAAvB,CAA8C,mBAA9C,EACAD,CAAC,CAACK,cAAF,EACH,CAVD,CAWH,CAGM,CAGV,CAhDK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Interface to using clipboard.js\n *\n * @module     tool_componentlibrary/clipboardwrapper\n * @package    tool_componentlibrary\n * @copyright  2020 Bas Brands <bas@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', 'theme_boost/tooltip', 'tool_componentlibrary/build/clipboard'],\n\nfunction($, Tooltip, ClipboardJS) {\n\n    var init = function() {\n        // Insert copy to clipboard button before .highlight\n        var btnHtml = '<div class=\"bd-clipboard\"><button type=\"button\"' +\n            ' class=\"btn-clipboard\" title=\"Copy to clipboard\">Copy</button></div>';\n        document.querySelectorAll('figure.highlight, div.highlight')\n            .forEach(function (element) {\n                element.insertAdjacentHTML('beforebegin', btnHtml);\n            });\n\n        document.querySelectorAll('.btn-clipboard')\n            .forEach(function(btn) {\n                var tooltipBtn = new Tooltip(btn);\n\n                btn.addEventListener('mouseleave', function () {\n                    // Explicitly hide tooltip, since after clicking it remains\n                    // focused (as it's a button), so tooltip would otherwise\n                    // remain visible until focus is moved away\n                    tooltipBtn.hide();\n                });\n            });\n\n        var clipboard = new ClipboardJS('.btn-clipboard', {\n            target: function (trigger) {\n                return trigger.parentNode.nextElementSibling;\n            }\n        });\n\n        clipboard.on('success', function(e) {\n            var tooltipBtn = new Tooltip(e.trigger);\n            e.trigger.setAttribute('data-original-title', 'Copied!');\n            tooltipBtn.show();\n            setTimeout(function() {\n                tooltipBtn.dispose();\n            }, 3000);\n\n            e.trigger.setAttribute('data-original-title', 'Copy to clipboard');\n            e.clearSelection();\n        });\n    };\n\n    // This module does not expose anything.\n    return {\n        init: init\n    };\n});"],"file":"clipboardwrapper.min.js"}